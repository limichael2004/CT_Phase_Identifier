#Now you should have a master spreadsheet with all of the first-order statistics (Pyradiomics) that you extracted from specific ROI's (Total Segmentator).
#However, you will notice that each unique patient w******* will have X amount of rows based on how many ROI's you extracted from 
#For example, if you extracted 2 ROI's (aorta, portal_vein_and_splenic_vein), then each patient will have two rows
#The future code will treat each row as a seperate patient, so we need to add something that uniquely identifies each patient.

#We can do this through a code in Matlab, or if you have limited coding experience like I do, it can also be easily done, even for high power, in excel. I will show both ways

%Method 1: Matlab
%To load up Matlab from the command line, type in the following two lines

module load matlab/r22b     #or whatever version you have (22, 23, 24, etc)
%enter
matlab&

%matlab should now load

%Make sure to navigate to where your master output is located
%Click 'New Script' and paste the following

function add_patient_ids()
    % Define the input and output file paths, adjust according to your liking
    inputFilePath = '/Radonc/Cancer Physics and Engineering Lab/Michael Li/Thursday 6.14/pre_three_roi.csv';
    outputFilePath = '/Radonc/Cancer Physics and Engineering Lab/Michael Li/Thursday 6.14/three_roi.csv';

    % Load the dataset
    data = readtable(inputFilePath, 'VariableNamingRule', 'preserve');

    % Verify the dataset
    disp('Dataset loaded successfully.');
    disp('Dataset preview:');
    disp(head(data));

    % Add a PatientID column based on row pairs, if you extracted three ROI's, just change 2 to 3, etc
    numPatients = height(data) / 2;
    data.PatientID = repelem(1:numPatients, 2)';

    % Move PatientID column to the first position
    data = [data(:, end), data(:, 1:end-1)];

    % Save the modified data
    writetable(data, outputFilePath);

    % Display the location of the output file
    disp(['Modified data with PatientIDs saved to: ', outputFilePath]);
end


